@model BookReview.Models.Book


<h4>Отзывы</h4>

@if (Model != null)
{
    foreach (var comment in Model.Comments)
    {


        <div class="panel panel-default">
            <div class="panel-heading">
                <h3 class="panel-title"> 
                     
                     @Html.ActionLink(comment.AspNetUser.FullName, "Index", "Profile", new {commentedBy = comment.AspNetUser.FullName}, null) написал: 
                     @Html.DisplayFor(modelitem => comment.PostedOn)
                 
                </h3>
            </div>
            <div class="panel-body">
                @Html.DisplayFor(modelitem => comment.Text)
            </div>
        </div>
    }
}

@if (Request.IsAuthenticated)
{

    using (Html.BeginForm("Reply", "AddComment", FormMethod.Post))
    {
        @Html.AntiForgeryToken()

        <div class="form-horizontal">
            <hr />
            @Html.ValidationSummary(true)


            <div class="form-group">
                <div class="col-md-offset-2 col-md-10">
                    <input class="text-box single-line" name="comment" type="text" />
                    <input name="bukid" type="hidden" value="@Model.BookId" />
                </div>
            </div>

            <div class="form-group">
                <div class="col-md-offset-2 col-md-10">
                    <input type="submit" class="btn btn-default" value="do it" />
                </div>
            </div>


        </div>
    }

}
else
{   <ul class="list-group">
    <li class="list-group-item">
    Вы не можете оставлять комментарии. Пожалуйста, @Html.ActionLink("войдите", "Login", "Account", routeValues: null, htmlAttributes: new { id = "loginLink" })
    или @Html.ActionLink("зарегистрируйтесь", "Register", "Account", routeValues: null, htmlAttributes: new { id = "registerLink" })



</li>
        </ul>
}